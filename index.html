<!DOCTYPE html>
<html>
<head>
  <title>Student Voting App</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <div class="sidebar">
      <ul>
        <li><a href="#">Settings</a></li>
        <li><button onclick="redirectToTeacherLogin()">Teacher Login</button></li> 
      </ul>
    </div>

    <div class="main-content">
      <div class="img-container">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSJNCA1lSIQVxe5WVw6W2hrOCRvu69xl4x_iw&s" alt="Kps Kadma" width="100">
      <h1>Student Cabinet Elections</h1>
      </div>
      <section>
        <section>
          <span class="class">
            <label for="class">Class</label>
            <select id="class" required>
              <option value="" disabled selected>Select Your Class</option>
              <option value="VII">VII</option>
              <option value="IX">IX</option>
              <option value="X">X</option>
              <option value="XI">XI</option>
              <option value="XII">XII</option>
            </select>
          </span>

          <span class="sec">
            <label for="sec">Section</label>
            <select id="sec" required>
              <option value="" disabled selected>Select Your Section</option>
              <option value="A">A</option>
              <option value="B">B</option>
              <option value="C">C</option>
              <option value="D">D</option>
              <option value="E">E</option>
            </select>
          </span>

          <span>
            <label for="roll">Roll No.</label>
            <input id="roll" type="number" placeholder="Enter Your Roll" required>
            </select>
          </span>

        <h2>Vote for President</h2>
        <div class="candidate-group">
          <div class="candidate">
            <input type="radio" id="president1" name="president" value="Candidate 1" required>
            <label for="president1">Candidate 1</label>
          </div>

          <div class="candidate">
            <input type="radio" id="president2" name="president" value="Candidate 2" required>
            <label for="president2">Candidate 2</label>
          </div>
          <div class="candidate">
            <input type="radio" id="president3" name="president" value="Candidate 3" required>
            <label for="president3">Candidate 3</label>
          </div>
        </div>
      </section>

      <section>
        <h2>Vote for Vice President</h2>
        <div class="candidate-group">
          <div class="candidate">
            <input type="radio" id="vp1" name="vp" value="Candidate 1"required>
            <label for="vp1">Candidate 1</label>
          </div>
          <div class="candidate">
            <input type="radio" id="vp2" name="vp" value="Candidate 2" required>
            <label for="vp2">Candidate 2</label>
          </div>
          <div class="candidate">
            <input type="radio" id="vp3" name="vp" value="Candidate 3" required>
            <label for="vp3">Candidate 3</label>
          </div>
        </div>
      </section>

      <form onsubmit="return submitVote();"> 
        <button type="submit">Submit Vote</button>
      </form>

      <footer>
        <p>Â© 2023 KPS KADMA</p>
      </footer>
    </div>
  </div>

  <script>
    function redirectToTeacherLogin() {
      window.location.href = "teacher_login.html";
    }

    function submitVote() {
      const president = document.querySelector('input[name="president"]:checked').value;
      const vp = document.querySelector('input[name="vp"]:checked').value;

      // Updated the port to 3000
      fetch('http://localhost:3000/vote', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ category: 'President', candidate: president })
      });

      fetch('http://localhost:3000/vote', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ category: 'Vice President', candidate: vp })
      });

      location.reload()

      alert('Vote submitted successfully!');
      return false;
    }
  </script>

</body>
</html>
